<div class="max-w-7xl mx-auto p-6 max-md:p-4">
  <!-- Loading State -->
  <div class="flex flex-col items-center justify-center min-h-[300px] gap-4 text-gray-500" *ngIf="loading">
    <mat-spinner diameter="48"></mat-spinner>
    <p>Carregando informações do artista...</p>
  </div>

  <!-- Error State -->
  <div class="flex flex-col items-center justify-center p-12 text-center bg-white rounded-xl shadow-sm" *ngIf="error && !loading">
    <div class="w-20 h-20 rounded-full bg-error-50 flex items-center justify-center mb-6">
      <mat-icon class="icon-xl text-error-500">error_outline</mat-icon>
    </div>
    <h2 class="text-2xl font-medium text-gray-900 mb-2">Erro ao carregar artista</h2>
    <p class="text-gray-500 mb-6 max-w-md">{{ error }}</p>
    <button mat-raised-button color="primary" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
      Voltar para lista
    </button>
  </div>

  <!-- Artist Content -->
  <div class="flex flex-col gap-6 animate-fade-in" *ngIf="artist && !loading && !error">
    <!-- Breadcrumb + Actions -->
    <div class="flex items-center justify-between max-md:flex-col max-md:items-start max-md:gap-4">
      <nav class="text-sm text-gray-500 flex items-center gap-2">
        <a routerLink="/artists" class="no-underline text-gray-500 hover:text-primary transition-colors">Artistas</a>
        <span>/</span>
        <span class="text-gray-900 font-medium">{{ artist.name }}</span>
      </nav>
      <div class="flex items-center gap-2 max-md:w-full max-md:justify-end">
        <button mat-stroked-button (click)="goBack()">
          <mat-icon>arrow_back</mat-icon>
          <span class="max-sm:hidden">Voltar</span>
        </button>
        <button mat-raised-button color="primary" (click)="editArtist()">
          <mat-icon>edit</mat-icon>
          <span class="max-sm:hidden">Editar</span>
        </button>
        <button mat-icon-button color="warn" (click)="deleteArtist()" matTooltip="Excluir artista">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>

    <!-- Hero Card -->
    <div class="bg-white rounded-xl shadow-sm overflow-hidden">
      <!-- Header com gradiente e foto de fundo -->
      <div class="relative h-36 overflow-hidden"
           [class]="artist.type === 'BAND' ? 'bg-gradient-to-r from-accent to-accent-700' : 'bg-gradient-to-r from-primary to-primary-700'">
        <img *ngIf="artist.photoUrl"
             [src]="artist.photoUrl"
             alt=""
             class="absolute inset-0 w-full h-full object-cover opacity-30">
      </div>

      <!-- Content -->
      <div class="px-6 pb-6 max-md:px-4">
        <!-- Avatar sobrepondo -->
        <div class="relative z-10 -mt-24 mb-4">
          <div class="w-48 h-48 rounded-xl border-4 border-white shadow-lg overflow-hidden bg-white">
            <img *ngIf="artist.photoUrl"
                 [src]="artist.photoUrl"
                 [alt]="artist.name"
                 class="w-full h-full object-cover">
            <div *ngIf="!artist.photoUrl"
                 class="w-full h-full flex items-center justify-center"
                 [class]="artist.type === 'BAND' ? 'bg-gradient-to-br from-accent to-accent-700' : 'bg-gradient-to-br from-primary to-primary-700'">
              <mat-icon class="icon-xl text-white">{{ artist.type === 'BAND' ? 'groups' : 'person' }}</mat-icon>
            </div>
          </div>
        </div>

        <!-- Nome -->
        <h1 class="text-2xl font-bold text-gray-900 mb-3">{{ artist.name }}</h1>

        <!-- Badges -->
        <div class="flex flex-wrap gap-2 mb-6">
          <span class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium bg-gray-100 text-gray-700">
            <mat-icon class="icon-xs">{{ artist.type === 'BAND' ? 'groups' : 'person' }}</mat-icon>
            {{ getTypeLabel(artist.type) }}
          </span>
          <span class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium"
                [class]="artist.active ? 'bg-success-50 text-success-700' : 'bg-error-50 text-error-700'">
            <mat-icon class="icon-xs">{{ artist.active ? 'check_circle' : 'cancel' }}</mat-icon>
            {{ artist.active ? 'Ativo' : 'Inativo' }}
          </span>
        </div>

      </div>

      <!-- Biografia -->
      <div class="px-6 py-6 border-t border-gray-100 max-md:px-4" *ngIf="artist.biography">
        <h2 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3">Biografia</h2>
        <p class="text-gray-600 leading-relaxed whitespace-pre-wrap m-0">{{ artist.biography }}</p>
      </div>

      <div class="px-6 py-8 border-t border-gray-100 text-center max-md:px-4" *ngIf="!artist.biography">
        <mat-icon class="icon-xl text-gray-300 mb-2">description</mat-icon>
        <p class="text-sm text-gray-400 m-0">Nenhuma biografia cadastrada</p>
      </div>
    </div>

    <!-- Discografia -->
    <div class="bg-white rounded-xl shadow-sm overflow-hidden">
      <!-- Header -->
      <div class="flex items-center justify-between p-6 max-md:p-4 max-md:flex-col max-md:items-start max-md:gap-4">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-xl bg-primary-50 flex items-center justify-center">
            <mat-icon class="text-primary">album</mat-icon>
          </div>
          <div>
            <h2 class="text-lg font-semibold text-gray-900 m-0">Discografia</h2>
            <p class="text-sm text-gray-500 m-0">{{ artist.albums?.length || 0 }} álbuns cadastrados</p>
          </div>
        </div>
        <div class="flex gap-2">
          <button mat-stroked-button color="primary" (click)="linkAlbums()">
            <mat-icon>link</mat-icon>
            Vincular álbum
          </button>
          <button mat-raised-button color="primary" (click)="createAlbum()">
            <mat-icon>add</mat-icon>
            Novo álbum
          </button>
        </div>
      </div>

      <!-- Lista de álbuns -->
      <div class="divide-y divide-gray-100" *ngIf="artist.albums?.length">
        <div *ngFor="let album of artist.albums"
             class="album-row flex items-center gap-4 py-4 px-6 cursor-pointer transition-colors hover:bg-gray-50 max-md:px-4"
             (click)="viewAlbum(album.id)">
          <!-- Cover -->
          <div class="w-14 h-14 rounded-lg overflow-hidden bg-gray-100 shrink-0">
            <img *ngIf="album.coverUrl"
                 [src]="album.coverUrl"
                 [alt]="album.title"
                 class="w-full h-full object-cover">
            <div *ngIf="!album.coverUrl"
                 class="w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200">
              <mat-icon class="text-gray-400">album</mat-icon>
            </div>
          </div>
          <!-- Info -->
          <div class="flex-1 min-w-0">
            <div class="font-medium text-gray-900 truncate">{{ album.title }}</div>
            <div class="text-sm text-gray-500">{{ album.releaseYear }}</div>
          </div>
          <!-- Arrow -->
          <mat-icon class="text-gray-400">chevron_right</mat-icon>
        </div>
      </div>

      <!-- Empty State -->
      <div class="p-12 text-center" *ngIf="!artist.albums?.length">
        <mat-icon class="icon-2xl text-gray-300 mb-3">album</mat-icon>
        <h3 class="text-lg font-medium text-gray-900 mb-1">Nenhum álbum cadastrado</h3>
        <p class="text-sm text-gray-500 m-0">Este artista ainda não possui álbuns vinculados.</p>
      </div>
    </div>
  </div>
</div>
